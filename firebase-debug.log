[debug] [2025-05-01T21:32:56.815Z] ----------------------------------------------------------------------
[debug] [2025-05-01T21:32:56.818Z] Command:       C:\Program Files\nodejs\node.exe C:\Users\madei\AppData\Roaming\npm\node_modules\firebase-tools\lib\bin\firebase.js deploy --only functions -P village2-7a95d
[debug] [2025-05-01T21:32:56.818Z] CLI Version:   14.2.2
[debug] [2025-05-01T21:32:56.819Z] Platform:      win32
[debug] [2025-05-01T21:32:56.819Z] Node Version:  v20.18.3
[debug] [2025-05-01T21:32:56.819Z] Time:          Thu May 01 2025 22:32:56 GMT+0100 (British Summer Time)
[debug] [2025-05-01T21:32:56.819Z] ----------------------------------------------------------------------
[debug] 
[debug] [2025-05-01T21:32:57.148Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-05-01T21:32:57.149Z] > authorizing via signed-in user (josh@scailer.io)
[debug] [2025-05-01T21:32:57.149Z] [iam] checking project village2-7a95d for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2025-05-01T21:32:57.152Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:32:57.152Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:32:57.154Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/village2-7a95d:testIamPermissions [none]
[debug] [2025-05-01T21:32:57.154Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/village2-7a95d:testIamPermissions x-goog-quota-user=projects/village2-7a95d
[debug] [2025-05-01T21:32:57.154Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/village2-7a95d:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-05-01T21:32:57.945Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/village2-7a95d:testIamPermissions 200
[debug] [2025-05-01T21:32:57.946Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/village2-7a95d:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-05-01T21:32:57.947Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:32:57.948Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:32:57.948Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/village2-7a95d/serviceAccounts/village2-7a95d@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2025-05-01T21:32:57.948Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/village2-7a95d/serviceAccounts/village2-7a95d@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2025-05-01T21:32:58.572Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/village2-7a95d/serviceAccounts/village2-7a95d@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2025-05-01T21:32:58.572Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/village2-7a95d/serviceAccounts/village2-7a95d@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[info] 
[info] === Deploying to 'village2-7a95d'...
[info] 
[info] i  deploying functions 
[debug] [2025-05-01T21:32:58.582Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:32:58.583Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:32:58.583Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/village2-7a95d [none]
[debug] [2025-05-01T21:32:58.764Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/village2-7a95d 200
[debug] [2025-05-01T21:32:58.765Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/village2-7a95d {"projectNumber":"127494847818","projectId":"village2-7a95d","lifecycleState":"ACTIVE","name":"village2","labels":{"firebase":"enabled","firebase-core":"disabled"},"createTime":"2025-05-01T16:01:49.243843Z","parent":{"type":"organization","id":"379170102457"}}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: preparing codebase thevillage for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[debug] [2025-05-01T21:32:58.769Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:32:58.769Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:32:58.770Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:32:58.770Z] Checked if tokens are valid: true, expires at: 1746136441537
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[debug] [2025-05-01T21:32:58.771Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:32:58.771Z] Checked if tokens are valid: true, expires at: 1746136441537
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2025-05-01T21:32:58.772Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:32:58.772Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:32:58.773Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/village2-7a95d/services/cloudfunctions.googleapis.com [none]
[debug] [2025-05-01T21:32:58.773Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/village2-7a95d/services/cloudfunctions.googleapis.com x-goog-quota-user=projects/village2-7a95d
[debug] [2025-05-01T21:32:58.777Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/village2-7a95d/services/runtimeconfig.googleapis.com [none]
[debug] [2025-05-01T21:32:58.778Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/village2-7a95d/services/runtimeconfig.googleapis.com x-goog-quota-user=projects/village2-7a95d
[debug] [2025-05-01T21:32:58.783Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/village2-7a95d/services/cloudbuild.googleapis.com [none]
[debug] [2025-05-01T21:32:58.783Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/village2-7a95d/services/cloudbuild.googleapis.com x-goog-quota-user=projects/village2-7a95d
[debug] [2025-05-01T21:32:58.787Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/village2-7a95d/services/artifactregistry.googleapis.com [none]
[debug] [2025-05-01T21:32:58.787Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/village2-7a95d/services/artifactregistry.googleapis.com x-goog-quota-user=projects/village2-7a95d
[debug] [2025-05-01T21:32:59.575Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/village2-7a95d/services/cloudbuild.googleapis.com 200
[debug] [2025-05-01T21:32:59.576Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/village2-7a95d/services/cloudbuild.googleapis.com [omitted]
[info] +  functions: required API cloudbuild.googleapis.com is enabled 
[debug] [2025-05-01T21:32:59.590Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/village2-7a95d/services/cloudfunctions.googleapis.com 200
[debug] [2025-05-01T21:32:59.590Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/village2-7a95d/services/cloudfunctions.googleapis.com [omitted]
[info] +  functions: required API cloudfunctions.googleapis.com is enabled 
[debug] [2025-05-01T21:32:59.630Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/village2-7a95d/services/artifactregistry.googleapis.com 200
[debug] [2025-05-01T21:32:59.631Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/village2-7a95d/services/artifactregistry.googleapis.com [omitted]
[info] +  artifactregistry: required API artifactregistry.googleapis.com is enabled 
[debug] [2025-05-01T21:32:59.790Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/village2-7a95d/services/runtimeconfig.googleapis.com 200
[debug] [2025-05-01T21:32:59.790Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/village2-7a95d/services/runtimeconfig.googleapis.com [omitted]
[debug] [2025-05-01T21:32:59.790Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:32:59.790Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:32:59.790Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/village2-7a95d/adminSdkConfig [none]
[debug] [2025-05-01T21:33:00.016Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/village2-7a95d/adminSdkConfig 200
[debug] [2025-05-01T21:33:00.016Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/village2-7a95d/adminSdkConfig {"projectId":"village2-7a95d","storageBucket":"village2-7a95d.firebasestorage.app"}
[debug] [2025-05-01T21:33:00.017Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:33:00.017Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:33:00.017Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/village2-7a95d/configs [none]
[debug] [2025-05-01T21:33:00.349Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/village2-7a95d/configs 200
[debug] [2025-05-01T21:33:00.349Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/village2-7a95d/configs {}
[debug] [2025-05-01T21:33:00.352Z] Validating nodejs source
[debug] [2025-05-01T21:33:02.087Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "deploy:with-env": "firebase functions:config:set email.password=\"$EMAIL_PASSWORD\" && firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "22"
  },
  "main": "index.js",
  "dependencies": {
    "cors": "^2.8.5",
    "firebase-admin": "^12.6.0",
    "firebase-functions": "^6.0.1",
    "nodemailer": "^6.10.1"
  },
  "devDependencies": {
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true
}
[debug] [2025-05-01T21:33:02.087Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[debug] [2025-05-01T21:33:02.089Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-05-01T21:33:02.100Z] Found firebase-functions binary at 'C:\Users\madei\OasisfinalClone\OasisFinal\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8915

[debug] [2025-05-01T21:33:03.369Z] Got response from /__/functions.yaml {"endpoints":{"sendTourCalendarInvite":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.created","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"tourBookings/{bookingId}"},"retry":false},"entryPoint":"sendTourCalendarInvite"},"helloWorld":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"helloWorld"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[debug] [2025-05-01T21:33:07.440Z] Validating nodejs source
[debug] [2025-05-01T21:33:09.186Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "22"
  },
  "main": "index.js",
  "dependencies": {
    "firebase-admin": "^12.6.0",
    "firebase-functions": "^6.0.1"
  },
  "devDependencies": {
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true
}
[debug] [2025-05-01T21:33:09.186Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase thevillage to determine what to deploy 
[debug] [2025-05-01T21:33:09.187Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-05-01T21:33:09.194Z] Found firebase-functions binary at 'C:\Users\madei\OasisfinalClone\OasisFinal\tv\node_modules\.bin\firebase-functions'
[info] Serving at port 8356

[debug] [2025-05-01T21:33:09.993Z] Got response from /__/functions.yaml {"endpoints":{},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] i  extensions: ensuring required API firebaseextensions.googleapis.com is enabled... 
[debug] [2025-05-01T21:33:14.039Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:33:14.039Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:33:14.039Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/village2-7a95d/services/firebaseextensions.googleapis.com [none]
[debug] [2025-05-01T21:33:14.039Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/village2-7a95d/services/firebaseextensions.googleapis.com x-goog-quota-user=projects/village2-7a95d
[debug] [2025-05-01T21:33:14.851Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/village2-7a95d/services/firebaseextensions.googleapis.com 200
[debug] [2025-05-01T21:33:14.851Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/village2-7a95d/services/firebaseextensions.googleapis.com [omitted]
[info] +  extensions: required API firebaseextensions.googleapis.com is enabled 
[debug] [2025-05-01T21:33:14.852Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-05-01T21:33:14.852Z] > authorizing via signed-in user (josh@scailer.io)
[debug] [2025-05-01T21:33:14.852Z] [iam] checking project village2-7a95d for permissions ["firebase.projects.get","firebaseextensions.instances.list"]
[debug] [2025-05-01T21:33:14.853Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:33:14.853Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:33:14.853Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/village2-7a95d:testIamPermissions [none]
[debug] [2025-05-01T21:33:14.853Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/village2-7a95d:testIamPermissions x-goog-quota-user=projects/village2-7a95d
[debug] [2025-05-01T21:33:14.853Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/village2-7a95d:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-05-01T21:33:15.485Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/village2-7a95d:testIamPermissions 200
[debug] [2025-05-01T21:33:15.486Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/village2-7a95d:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-05-01T21:33:15.486Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:33:15.486Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:33:15.487Z] >>> [apiv2][query] GET https://firebaseextensions.googleapis.com/v1beta/projects/village2-7a95d/instances pageSize=100&pageToken=
[debug] [2025-05-01T21:33:16.212Z] <<< [apiv2][status] GET https://firebaseextensions.googleapis.com/v1beta/projects/village2-7a95d/instances 200
[debug] [2025-05-01T21:33:16.213Z] <<< [apiv2][body] GET https://firebaseextensions.googleapis.com/v1beta/projects/village2-7a95d/instances {}
[info] i  functions: preparing functions directory for uploading... 
[info] i  functions: packaged C:\Users\madei\OasisfinalClone\OasisFinal\functions (77.1 KB) for uploading 
[debug] [2025-05-01T21:33:16.272Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:33:16.272Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:33:16.272Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/village2-7a95d/locations/-/functions [none]
[debug] [2025-05-01T21:33:16.947Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/village2-7a95d/locations/-/functions 200
[debug] [2025-05-01T21:33:16.947Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/village2-7a95d/locations/-/functions {}
[debug] [2025-05-01T21:33:16.948Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:33:16.948Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:33:16.949Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/village2-7a95d/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2025-05-01T21:33:17.897Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/village2-7a95d/locations/-/functions 200
[debug] [2025-05-01T21:33:17.898Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/village2-7a95d/locations/-/functions {"functions":[{"name":"projects/village2-7a95d/locations/us-central1/functions/helloWorld","buildConfig":{"build":"projects/127494847818/locations/us-central1/builds/e07dfc4d-4644-4fe8-b817-cabfab995a39","runtime":"nodejs22","entryPoint":"helloWorld","source":{"storageSource":{"bucket":"gcf-v2-sources-127494847818-us-central1","object":"helloWorld/function-source.zip","generation":"1746133899604084"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/village2-7a95d/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-127494847818-us-central1","object":"helloWorld/function-source.zip","generation":"1746133899604084"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/village2-7a95d/serviceAccounts/127494847818-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"state":"UNKNOWN","updateTime":"2025-05-01T21:28:11.846555458Z","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"57ebc8b031f1fc21c151944b9fee41049d1925bd"},"stateMessages":[{"severity":"ERROR","type":"CloudRunServiceNotFound","message":"Cloud Run service projects/village2-7a95d/locations/us-central1/services/helloworld for the function was not found. The function will not work correctly. Please redeploy."}],"environment":"GEN_2","url":"https://us-central1-village2-7a95d.cloudfunctions.net/helloWorld","createTime":"2025-05-01T21:11:39.843604599Z","satisfiesPzi":true}]}
[debug] [2025-05-01T21:33:17.901Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:33:17.901Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:33:17.901Z] >>> [apiv2][query] GET https://firestore.googleapis.com/v1/projects/village2-7a95d/databases/(default) [none]
[debug] [2025-05-01T21:33:18.622Z] <<< [apiv2][status] GET https://firestore.googleapis.com/v1/projects/village2-7a95d/databases/(default) 200
[debug] [2025-05-01T21:33:18.622Z] <<< [apiv2][body] GET https://firestore.googleapis.com/v1/projects/village2-7a95d/databases/(default) {"name":"projects/village2-7a95d/databases/(default)","uid":"1573e0c0-89a1-48f9-8194-ac4fbcd7a76c","createTime":"2025-05-01T16:03:05.611042Z","updateTime":"2025-05-01T16:03:05.611042Z","locationId":"nam5","type":"FIRESTORE_NATIVE","concurrencyMode":"PESSIMISTIC","versionRetentionPeriod":"3600s","earliestVersionTime":"2025-05-01T20:33:18.364122Z","appEngineIntegrationMode":"DISABLED","keyPrefix":"s","pointInTimeRecoveryEnablement":"POINT_IN_TIME_RECOVERY_DISABLED","deleteProtectionState":"DELETE_PROTECTION_DISABLED","databaseEdition":"STANDARD","freeTier":true,"etag":"IKze6cGcg40DMJzYl9bVgo0D"}
[info] i  functions: ensuring required API run.googleapis.com is enabled... 
[debug] [2025-05-01T21:33:18.626Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:33:18.627Z] Checked if tokens are valid: true, expires at: 1746136441537
[info] i  functions: ensuring required API eventarc.googleapis.com is enabled... 
[debug] [2025-05-01T21:33:18.627Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:33:18.628Z] Checked if tokens are valid: true, expires at: 1746136441537
[info] i  functions: ensuring required API pubsub.googleapis.com is enabled... 
[debug] [2025-05-01T21:33:18.629Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:33:18.629Z] Checked if tokens are valid: true, expires at: 1746136441537
[info] i  functions: ensuring required API storage.googleapis.com is enabled... 
[debug] [2025-05-01T21:33:18.630Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:33:18.630Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:33:18.630Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/village2-7a95d/services/run.googleapis.com [none]
[debug] [2025-05-01T21:33:18.630Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/village2-7a95d/services/run.googleapis.com x-goog-quota-user=projects/village2-7a95d
[debug] [2025-05-01T21:33:18.632Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/village2-7a95d/services/eventarc.googleapis.com [none]
[debug] [2025-05-01T21:33:18.632Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/village2-7a95d/services/eventarc.googleapis.com x-goog-quota-user=projects/village2-7a95d
[debug] [2025-05-01T21:33:18.637Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/village2-7a95d/services/pubsub.googleapis.com [none]
[debug] [2025-05-01T21:33:18.638Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/village2-7a95d/services/pubsub.googleapis.com x-goog-quota-user=projects/village2-7a95d
[debug] [2025-05-01T21:33:18.642Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/village2-7a95d/services/storage.googleapis.com [none]
[debug] [2025-05-01T21:33:18.642Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/village2-7a95d/services/storage.googleapis.com x-goog-quota-user=projects/village2-7a95d
[debug] [2025-05-01T21:33:19.428Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/village2-7a95d/services/run.googleapis.com 200
[debug] [2025-05-01T21:33:19.429Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/village2-7a95d/services/run.googleapis.com [omitted]
[info] +  functions: required API run.googleapis.com is enabled 
[debug] [2025-05-01T21:33:19.433Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/village2-7a95d/services/pubsub.googleapis.com 200
[debug] [2025-05-01T21:33:19.433Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/village2-7a95d/services/pubsub.googleapis.com [omitted]
[info] +  functions: required API pubsub.googleapis.com is enabled 
[debug] [2025-05-01T21:33:19.565Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/village2-7a95d/services/storage.googleapis.com 200
[debug] [2025-05-01T21:33:19.565Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/village2-7a95d/services/storage.googleapis.com [omitted]
[info] +  functions: required API storage.googleapis.com is enabled 
[debug] [2025-05-01T21:33:19.589Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/village2-7a95d/services/eventarc.googleapis.com 200
[debug] [2025-05-01T21:33:19.589Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/village2-7a95d/services/eventarc.googleapis.com [omitted]
[info] +  functions: required API eventarc.googleapis.com is enabled 
[info] i  functions: generating the service identity for pubsub.googleapis.com... 
[debug] [2025-05-01T21:33:19.590Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:33:19.590Z] Checked if tokens are valid: true, expires at: 1746136441537
[info] i  functions: generating the service identity for eventarc.googleapis.com... 
[debug] [2025-05-01T21:33:19.591Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:33:19.591Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:33:19.591Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/127494847818/services/pubsub.googleapis.com:generateServiceIdentity [none]
[debug] [2025-05-01T21:33:19.592Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/127494847818/services/eventarc.googleapis.com:generateServiceIdentity [none]
[debug] [2025-05-01T21:33:19.936Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/127494847818/services/eventarc.googleapis.com:generateServiceIdentity 200
[debug] [2025-05-01T21:33:19.936Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/127494847818/services/eventarc.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-127494847818@gcp-sa-eventarc.iam.gserviceaccount.com","uniqueId":"116805781273655708945"}}
[debug] [2025-05-01T21:33:20.346Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/127494847818/services/pubsub.googleapis.com:generateServiceIdentity 200
[debug] [2025-05-01T21:33:20.347Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/127494847818/services/pubsub.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-127494847818@gcp-sa-pubsub.iam.gserviceaccount.com","uniqueId":"107223021195573308439"}}
[debug] [2025-05-01T21:33:20.351Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:33:20.351Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:33:20.351Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/127494847818:getIamPolicy [none]
[debug] [2025-05-01T21:33:20.593Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/127494847818:getIamPolicy 200
[debug] [2025-05-01T21:33:20.593Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/127494847818:getIamPolicy {"version":1,"etag":"BwY0GbtGIl4=","bindings":[{"role":"roles/artifactregistry.serviceAgent","members":["serviceAccount:service-127494847818@gcp-sa-artifactregistry.iam.gserviceaccount.com"]},{"role":"roles/artifactregistry.writer","members":["serviceAccount:127494847818@cloudbuild.gserviceaccount.com"]},{"role":"roles/cloudbuild.builds.builder","members":["serviceAccount:127494847818@cloudbuild.gserviceaccount.com"]},{"role":"roles/cloudbuild.serviceAgent","members":["serviceAccount:service-127494847818@gcp-sa-cloudbuild.iam.gserviceaccount.com"]},{"role":"roles/cloudfunctions.developer","members":["serviceAccount:127494847818@cloudbuild.gserviceaccount.com"]},{"role":"roles/cloudfunctions.serviceAgent","members":["serviceAccount:service-127494847818@gcf-admin-robot.iam.gserviceaccount.com"]},{"role":"roles/containerregistry.ServiceAgent","members":["serviceAccount:service-127494847818@containerregistry.iam.gserviceaccount.com"]},{"role":"roles/editor","members":["serviceAccount:127494847818@cloudservices.gserviceaccount.com"]},{"role":"roles/eventarc.eventReceiver","members":["serviceAccount:127494847818-compute@developer.gserviceaccount.com"]},{"role":"roles/eventarc.serviceAgent","members":["serviceAccount:service-127494847818@gcp-sa-eventarc.iam.gserviceaccount.com"]},{"role":"roles/firebase.managementServiceAgent","members":["serviceAccount:service-127494847818@gcp-sa-firebase.iam.gserviceaccount.com"]},{"role":"roles/firebase.sdkAdminServiceAgent","members":["serviceAccount:firebase-adminsdk-fbsvc@village2-7a95d.iam.gserviceaccount.com"]},{"role":"roles/firebasemods.serviceAgent","members":["serviceAccount:service-127494847818@gcp-sa-firebasemods.iam.gserviceaccount.com"]},{"role":"roles/firebaserules.system","members":["serviceAccount:service-127494847818@firebase-rules.iam.gserviceaccount.com"]},{"role":"roles/firestore.serviceAgent","members":["serviceAccount:service-127494847818@gcp-sa-firestore.iam.gserviceaccount.com"]},{"role":"roles/iam.serviceAccountTokenCreator","members":["serviceAccount:firebase-adminsdk-fbsvc@village2-7a95d.iam.gserviceaccount.com","serviceAccount:service-127494847818@gcp-sa-pubsub.iam.gserviceaccount.com"]},{"role":"roles/iam.serviceAccountUser","members":["serviceAccount:127494847818@cloudbuild.gserviceaccount.com"]},{"role":"roles/owner","members":["user:josh@scailer.io"]},{"role":"roles/run.invoker","members":["serviceAccount:127494847818-compute@developer.gserviceaccount.com"]},{"role":"roles/run.serviceAgent","members":["serviceAccount:service-127494847818@serverless-robot-prod.iam.gserviceaccount.com"]}]}
[debug] [2025-05-01T21:33:20.594Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:33:20.595Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:33:20.595Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/village2-7a95d [none]
[debug] [2025-05-01T21:33:20.976Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/village2-7a95d 200
[debug] [2025-05-01T21:33:20.977Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/village2-7a95d {"projectNumber":"127494847818","projectId":"village2-7a95d","lifecycleState":"ACTIVE","name":"village2","labels":{"firebase":"enabled","firebase-core":"disabled"},"createTime":"2025-05-01T16:01:49.243843Z","parent":{"type":"organization","id":"379170102457"}}
[debug] [2025-05-01T21:33:20.980Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:33:20.980Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:33:20.981Z] >>> [apiv2][query] GET https://cloudbilling.googleapis.com/v1/projects/village2-7a95d/billingInfo [none]
[debug] [2025-05-01T21:33:21.768Z] <<< [apiv2][status] GET https://cloudbilling.googleapis.com/v1/projects/village2-7a95d/billingInfo 200
[debug] [2025-05-01T21:33:21.768Z] <<< [apiv2][body] GET https://cloudbilling.googleapis.com/v1/projects/village2-7a95d/billingInfo {"name":"projects/village2-7a95d/billingInfo","projectId":"village2-7a95d","billingAccountName":"billingAccounts/01819D-9E8F33-9CF261","billingEnabled":true}
[debug] [2025-05-01T21:33:21.772Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:33:21.772Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:33:21.772Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v2/projects/village2-7a95d/locations/us-central1/functions:generateUploadUrl [none]
[debug] [2025-05-01T21:33:22.628Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v2/projects/village2-7a95d/locations/us-central1/functions:generateUploadUrl 200
[debug] [2025-05-01T21:33:22.629Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v2/projects/village2-7a95d/locations/us-central1/functions:generateUploadUrl {"uploadUrl":"https://storage.googleapis.com/gcf-v2-uploads-127494847818.us-central1.cloudfunctions.appspot.com/6bb1870b-e1b4-4f61-868f-66744fc3c556.zip?GoogleAccessId=service-127494847818@gcf-admin-robot.iam.gserviceaccount.com&Expires=1746137002&Signature=YzGNndaiUH13zAV3wJEwtgtKp6GtV%2B3HSTLO7v%2BqlfsOmASX9aimwjh08eS713MBUSivL4idbVdiJF47bwJVd7fHsiA%2BSXyjErqfBB7fcxHbkeGwz5NFbN8ux4AyFKWvMfBv757k5YCSsazdkhnzBHbwAqyFh%2FEWnfpLlkaRdid6eyxB%2F22URXLlIToAPbfllccmiwgMbRQWEdr8N1%2FDsJJbOjWPp9cB6d1rKl1mOSk90eSQenmZ29AlYAPrGQ3XK7dECMlLUN%2BU8xEA9aXwx0sDXssXjVjXqS%2FxJM%2FmZt4riZTkWazXoDecJetNim6EwVigbZZIxjJl9m0hKr0lLA%3D%3D","storageSource":{"bucket":"gcf-v2-uploads-127494847818.us-central1.cloudfunctions.appspot.com","object":"6bb1870b-e1b4-4f61-868f-66744fc3c556.zip"}}
[debug] [2025-05-01T21:33:22.632Z] >>> [apiv2][query] PUT https://storage.googleapis.com/gcf-v2-uploads-127494847818.us-central1.cloudfunctions.appspot.com/6bb1870b-e1b4-4f61-868f-66744fc3c556.zip GoogleAccessId=service-127494847818%40gcf-admin-robot.iam.gserviceaccount.com&Expires=1746137002&Signature=YzGNndaiUH13zAV3wJEwtgtKp6GtV%2B3HSTLO7v%2BqlfsOmASX9aimwjh08eS713MBUSivL4idbVdiJF47bwJVd7fHsiA%2BSXyjErqfBB7fcxHbkeGwz5NFbN8ux4AyFKWvMfBv757k5YCSsazdkhnzBHbwAqyFh%2FEWnfpLlkaRdid6eyxB%2F22URXLlIToAPbfllccmiwgMbRQWEdr8N1%2FDsJJbOjWPp9cB6d1rKl1mOSk90eSQenmZ29AlYAPrGQ3XK7dECMlLUN%2BU8xEA9aXwx0sDXssXjVjXqS%2FxJM%2FmZt4riZTkWazXoDecJetNim6EwVigbZZIxjJl9m0hKr0lLA%3D%3D
[debug] [2025-05-01T21:33:22.633Z] >>> [apiv2][body] PUT https://storage.googleapis.com/gcf-v2-uploads-127494847818.us-central1.cloudfunctions.appspot.com/6bb1870b-e1b4-4f61-868f-66744fc3c556.zip [stream]
[debug] [2025-05-01T21:33:23.145Z] <<< [apiv2][status] PUT https://storage.googleapis.com/gcf-v2-uploads-127494847818.us-central1.cloudfunctions.appspot.com/6bb1870b-e1b4-4f61-868f-66744fc3c556.zip 200
[debug] [2025-05-01T21:33:23.145Z] <<< [apiv2][body] PUT https://storage.googleapis.com/gcf-v2-uploads-127494847818.us-central1.cloudfunctions.appspot.com/6bb1870b-e1b4-4f61-868f-66744fc3c556.zip [omitted]
[info] +  functions: functions folder uploaded successfully 
[info] i  functions: creating Node.js 22 (2nd Gen) function sendTourCalendarInvite(us-central1)... 
[info] i  functions: updating Node.js 22 (2nd Gen) function helloWorld(us-central1)... 
[debug] [2025-05-01T21:33:23.160Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:33:23.160Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:33:23.160Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v2/projects/village2-7a95d/locations/us-central1/functions functionId=sendTourCalendarInvite
[debug] [2025-05-01T21:33:23.160Z] >>> [apiv2][body] POST https://cloudfunctions.googleapis.com/v2/projects/village2-7a95d/locations/us-central1/functions {"name":"projects/village2-7a95d/locations/us-central1/functions/sendTourCalendarInvite","buildConfig":{"runtime":"nodejs22","entryPoint":"sendTourCalendarInvite","source":{"storageSource":{"bucket":"gcf-v2-uploads-127494847818.us-central1.cloudfunctions.appspot.com","object":"6bb1870b-e1b4-4f61-868f-66744fc3c556.zip"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}},"serviceConfig":{"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"village2-7a95d\",\"storageBucket\":\"village2-7a95d.firebasestorage.app\"}","GCLOUD_PROJECT":"village2-7a95d","EVENTARC_CLOUD_EVENT_SOURCE":"projects/village2-7a95d/locations/us-central1/services/sendTourCalendarInvite","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"sendTourCalendarInvite","LOG_EXECUTION_ID":"true"},"ingressSettings":null,"timeoutSeconds":null,"serviceAccountEmail":null,"availableMemory":"256Mi","minInstanceCount":null,"maxInstanceCount":null,"maxInstanceRequestConcurrency":80,"availableCpu":"1","vpcConnector":null,"vpcConnectorEgressSettings":null},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"57ebc8b031f1fc21c151944b9fee41049d1925bd"},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.created","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"tourBookings/{bookingId}","operator":"match-path-pattern"}],"triggerRegion":"nam5"}}
[debug] [2025-05-01T21:33:25.084Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v2/projects/village2-7a95d/locations/us-central1/functions 200
[debug] [2025-05-01T21:33:25.084Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v2/projects/village2-7a95d/locations/us-central1/functions {"name":"projects/village2-7a95d/locations/us-central1/operations/operation-1746135203653-63419c88b262e-5a7b0d64-ec5ef57b","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-05-01T21:33:24.790419353Z","target":"projects/village2-7a95d/locations/us-central1/functions/sendTourCalendarInvite","verb":"create","cancelRequested":false,"apiVersion":"v2"},"done":false}
[debug] [2025-05-01T21:33:25.086Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:33:25.086Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:33:25.087Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/village2-7a95d/locations/us-central1/operations/operation-1746135203653-63419c88b262e-5a7b0d64-ec5ef57b [none]
[debug] [2025-05-01T21:33:25.787Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/village2-7a95d/locations/us-central1/operations/operation-1746135203653-63419c88b262e-5a7b0d64-ec5ef57b 200
[debug] [2025-05-01T21:33:25.788Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/village2-7a95d/locations/us-central1/operations/operation-1746135203653-63419c88b262e-5a7b0d64-ec5ef57b {"name":"projects/village2-7a95d/locations/us-central1/operations/operation-1746135203653-63419c88b262e-5a7b0d64-ec5ef57b","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-05-01T21:33:24.790419353Z","target":"projects/village2-7a95d/locations/us-central1/functions/sendTourCalendarInvite","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/village2-7a95d/locations/us-central1/functions/sendTourCalendarInvite","buildConfig":{"runtime":"nodejs22","entryPoint":"sendTourCalendarInvite","source":{"storageSource":{"bucket":"gcf-v2-sources-127494847818-us-central1","object":"sendTourCalendarInvite/function-source.zip","generation":"1746135204003585"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"serviceAccount":"projects/village2-7a95d/serviceAccounts/127494847818-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/village2-7a95d/locations/us-central1/services/sendtourcalendarinvite","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"village2-7a95d\",\"storageBucket\":\"village2-7a95d.firebasestorage.app\"}","GCLOUD_PROJECT":"village2-7a95d","EVENTARC_CLOUD_EVENT_SOURCE":"projects/village2-7a95d/locations/us-central1/services/sendTourCalendarInvite","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"sendTourCalendarInvite","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"127494847818-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/village2-7a95d/locations/nam5/triggers/sendtourcalendarinvite-738201","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"tourBookings/{bookingId}","operator":"match-path-pattern"}],"serviceAccountEmail":"127494847818-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"57ebc8b031f1fc21c151944b9fee41049d1925bd"},"environment":"GEN_2"},"stages":[{"name":"BUILD","state":"NOT_STARTED"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"CREATE_FUNCTION"},"done":false}
[debug] [2025-05-01T21:33:26.295Z] [create-default-us-central1-sendTourCalendarInvite] Retrying task index 0
[debug] [2025-05-01T21:33:26.296Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:33:26.296Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:33:26.297Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/village2-7a95d/locations/us-central1/operations/operation-1746135203653-63419c88b262e-5a7b0d64-ec5ef57b [none]
[debug] [2025-05-01T21:33:27.010Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/village2-7a95d/locations/us-central1/operations/operation-1746135203653-63419c88b262e-5a7b0d64-ec5ef57b 200
[debug] [2025-05-01T21:33:27.010Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/village2-7a95d/locations/us-central1/operations/operation-1746135203653-63419c88b262e-5a7b0d64-ec5ef57b {"name":"projects/village2-7a95d/locations/us-central1/operations/operation-1746135203653-63419c88b262e-5a7b0d64-ec5ef57b","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-05-01T21:33:24.790419353Z","target":"projects/village2-7a95d/locations/us-central1/functions/sendTourCalendarInvite","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/village2-7a95d/locations/us-central1/functions/sendTourCalendarInvite","buildConfig":{"runtime":"nodejs22","entryPoint":"sendTourCalendarInvite","source":{"storageSource":{"bucket":"gcf-v2-sources-127494847818-us-central1","object":"sendTourCalendarInvite/function-source.zip","generation":"1746135204003585"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"serviceAccount":"projects/village2-7a95d/serviceAccounts/127494847818-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/village2-7a95d/locations/us-central1/services/sendtourcalendarinvite","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"village2-7a95d\",\"storageBucket\":\"village2-7a95d.firebasestorage.app\"}","GCLOUD_PROJECT":"village2-7a95d","EVENTARC_CLOUD_EVENT_SOURCE":"projects/village2-7a95d/locations/us-central1/services/sendTourCalendarInvite","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"sendTourCalendarInvite","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"127494847818-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/village2-7a95d/locations/nam5/triggers/sendtourcalendarinvite-738201","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"tourBookings/{bookingId}","operator":"match-path-pattern"}],"serviceAccountEmail":"127494847818-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"57ebc8b031f1fc21c151944b9fee41049d1925bd"},"environment":"GEN_2"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/127494847818/locations/us-central1/builds/5fbdae1d-d269-4d0a-97fb-5a61ac8a6511","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/5fbdae1d-d269-4d0a-97fb-5a61ac8a6511?project=127494847818"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"CREATE_FUNCTION","buildName":"projects/127494847818/locations/us-central1/builds/5fbdae1d-d269-4d0a-97fb-5a61ac8a6511"},"done":false}
[debug] [2025-05-01T21:33:28.010Z] [create-default-us-central1-sendTourCalendarInvite] Retrying task index 0
[debug] [2025-05-01T21:33:28.011Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:33:28.011Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:33:28.012Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/village2-7a95d/locations/us-central1/operations/operation-1746135203653-63419c88b262e-5a7b0d64-ec5ef57b [none]
[debug] [2025-05-01T21:33:28.753Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/village2-7a95d/locations/us-central1/operations/operation-1746135203653-63419c88b262e-5a7b0d64-ec5ef57b 200
[debug] [2025-05-01T21:33:28.754Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/village2-7a95d/locations/us-central1/operations/operation-1746135203653-63419c88b262e-5a7b0d64-ec5ef57b {"name":"projects/village2-7a95d/locations/us-central1/operations/operation-1746135203653-63419c88b262e-5a7b0d64-ec5ef57b","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-05-01T21:33:24.790419353Z","target":"projects/village2-7a95d/locations/us-central1/functions/sendTourCalendarInvite","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/village2-7a95d/locations/us-central1/functions/sendTourCalendarInvite","buildConfig":{"runtime":"nodejs22","entryPoint":"sendTourCalendarInvite","source":{"storageSource":{"bucket":"gcf-v2-sources-127494847818-us-central1","object":"sendTourCalendarInvite/function-source.zip","generation":"1746135204003585"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"serviceAccount":"projects/village2-7a95d/serviceAccounts/127494847818-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/village2-7a95d/locations/us-central1/services/sendtourcalendarinvite","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"village2-7a95d\",\"storageBucket\":\"village2-7a95d.firebasestorage.app\"}","GCLOUD_PROJECT":"village2-7a95d","EVENTARC_CLOUD_EVENT_SOURCE":"projects/village2-7a95d/locations/us-central1/services/sendTourCalendarInvite","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"sendTourCalendarInvite","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"127494847818-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/village2-7a95d/locations/nam5/triggers/sendtourcalendarinvite-738201","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"tourBookings/{bookingId}","operator":"match-path-pattern"}],"serviceAccountEmail":"127494847818-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"57ebc8b031f1fc21c151944b9fee41049d1925bd"},"environment":"GEN_2"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/127494847818/locations/us-central1/builds/5fbdae1d-d269-4d0a-97fb-5a61ac8a6511","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/5fbdae1d-d269-4d0a-97fb-5a61ac8a6511?project=127494847818"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"CREATE_FUNCTION","buildName":"projects/127494847818/locations/us-central1/builds/5fbdae1d-d269-4d0a-97fb-5a61ac8a6511"},"done":false}
[debug] [2025-05-01T21:33:30.762Z] [create-default-us-central1-sendTourCalendarInvite] Retrying task index 0
[debug] [2025-05-01T21:33:30.762Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:33:30.762Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:33:30.762Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/village2-7a95d/locations/us-central1/operations/operation-1746135203653-63419c88b262e-5a7b0d64-ec5ef57b [none]
[debug] [2025-05-01T21:33:31.461Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/village2-7a95d/locations/us-central1/operations/operation-1746135203653-63419c88b262e-5a7b0d64-ec5ef57b 200
[debug] [2025-05-01T21:33:31.462Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/village2-7a95d/locations/us-central1/operations/operation-1746135203653-63419c88b262e-5a7b0d64-ec5ef57b {"name":"projects/village2-7a95d/locations/us-central1/operations/operation-1746135203653-63419c88b262e-5a7b0d64-ec5ef57b","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-05-01T21:33:24.790419353Z","target":"projects/village2-7a95d/locations/us-central1/functions/sendTourCalendarInvite","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/village2-7a95d/locations/us-central1/functions/sendTourCalendarInvite","buildConfig":{"runtime":"nodejs22","entryPoint":"sendTourCalendarInvite","source":{"storageSource":{"bucket":"gcf-v2-sources-127494847818-us-central1","object":"sendTourCalendarInvite/function-source.zip","generation":"1746135204003585"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"serviceAccount":"projects/village2-7a95d/serviceAccounts/127494847818-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/village2-7a95d/locations/us-central1/services/sendtourcalendarinvite","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"village2-7a95d\",\"storageBucket\":\"village2-7a95d.firebasestorage.app\"}","GCLOUD_PROJECT":"village2-7a95d","EVENTARC_CLOUD_EVENT_SOURCE":"projects/village2-7a95d/locations/us-central1/services/sendTourCalendarInvite","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"sendTourCalendarInvite","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"127494847818-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/village2-7a95d/locations/nam5/triggers/sendtourcalendarinvite-738201","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"tourBookings/{bookingId}","operator":"match-path-pattern"}],"serviceAccountEmail":"127494847818-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"57ebc8b031f1fc21c151944b9fee41049d1925bd"},"environment":"GEN_2"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/127494847818/locations/us-central1/builds/5fbdae1d-d269-4d0a-97fb-5a61ac8a6511","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/5fbdae1d-d269-4d0a-97fb-5a61ac8a6511?project=127494847818"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"CREATE_FUNCTION","buildName":"projects/127494847818/locations/us-central1/builds/5fbdae1d-d269-4d0a-97fb-5a61ac8a6511"},"done":false}
[debug] [2025-05-01T21:33:35.464Z] [create-default-us-central1-sendTourCalendarInvite] Retrying task index 0
[debug] [2025-05-01T21:33:35.465Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:33:35.465Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:33:35.465Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/village2-7a95d/locations/us-central1/operations/operation-1746135203653-63419c88b262e-5a7b0d64-ec5ef57b [none]
[debug] [2025-05-01T21:33:36.159Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/village2-7a95d/locations/us-central1/operations/operation-1746135203653-63419c88b262e-5a7b0d64-ec5ef57b 200
[debug] [2025-05-01T21:33:36.160Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/village2-7a95d/locations/us-central1/operations/operation-1746135203653-63419c88b262e-5a7b0d64-ec5ef57b {"name":"projects/village2-7a95d/locations/us-central1/operations/operation-1746135203653-63419c88b262e-5a7b0d64-ec5ef57b","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-05-01T21:33:24.790419353Z","target":"projects/village2-7a95d/locations/us-central1/functions/sendTourCalendarInvite","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/village2-7a95d/locations/us-central1/functions/sendTourCalendarInvite","buildConfig":{"runtime":"nodejs22","entryPoint":"sendTourCalendarInvite","source":{"storageSource":{"bucket":"gcf-v2-sources-127494847818-us-central1","object":"sendTourCalendarInvite/function-source.zip","generation":"1746135204003585"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"serviceAccount":"projects/village2-7a95d/serviceAccounts/127494847818-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/village2-7a95d/locations/us-central1/services/sendtourcalendarinvite","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"village2-7a95d\",\"storageBucket\":\"village2-7a95d.firebasestorage.app\"}","GCLOUD_PROJECT":"village2-7a95d","EVENTARC_CLOUD_EVENT_SOURCE":"projects/village2-7a95d/locations/us-central1/services/sendTourCalendarInvite","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"sendTourCalendarInvite","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"127494847818-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/village2-7a95d/locations/nam5/triggers/sendtourcalendarinvite-738201","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"tourBookings/{bookingId}","operator":"match-path-pattern"}],"serviceAccountEmail":"127494847818-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"57ebc8b031f1fc21c151944b9fee41049d1925bd"},"environment":"GEN_2"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/127494847818/locations/us-central1/builds/5fbdae1d-d269-4d0a-97fb-5a61ac8a6511","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/5fbdae1d-d269-4d0a-97fb-5a61ac8a6511?project=127494847818"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"CREATE_FUNCTION","buildName":"projects/127494847818/locations/us-central1/builds/5fbdae1d-d269-4d0a-97fb-5a61ac8a6511"},"done":false}
[debug] [2025-05-01T21:33:44.165Z] [create-default-us-central1-sendTourCalendarInvite] Retrying task index 0
[debug] [2025-05-01T21:33:44.166Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:33:44.166Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:33:44.166Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/village2-7a95d/locations/us-central1/operations/operation-1746135203653-63419c88b262e-5a7b0d64-ec5ef57b [none]
[debug] [2025-05-01T21:33:44.906Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/village2-7a95d/locations/us-central1/operations/operation-1746135203653-63419c88b262e-5a7b0d64-ec5ef57b 200
[debug] [2025-05-01T21:33:44.906Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/village2-7a95d/locations/us-central1/operations/operation-1746135203653-63419c88b262e-5a7b0d64-ec5ef57b {"name":"projects/village2-7a95d/locations/us-central1/operations/operation-1746135203653-63419c88b262e-5a7b0d64-ec5ef57b","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-05-01T21:33:24.790419353Z","target":"projects/village2-7a95d/locations/us-central1/functions/sendTourCalendarInvite","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/village2-7a95d/locations/us-central1/functions/sendTourCalendarInvite","buildConfig":{"runtime":"nodejs22","entryPoint":"sendTourCalendarInvite","source":{"storageSource":{"bucket":"gcf-v2-sources-127494847818-us-central1","object":"sendTourCalendarInvite/function-source.zip","generation":"1746135204003585"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"serviceAccount":"projects/village2-7a95d/serviceAccounts/127494847818-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/village2-7a95d/locations/us-central1/services/sendtourcalendarinvite","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"village2-7a95d\",\"storageBucket\":\"village2-7a95d.firebasestorage.app\"}","GCLOUD_PROJECT":"village2-7a95d","EVENTARC_CLOUD_EVENT_SOURCE":"projects/village2-7a95d/locations/us-central1/services/sendTourCalendarInvite","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"sendTourCalendarInvite","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"127494847818-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/village2-7a95d/locations/nam5/triggers/sendtourcalendarinvite-738201","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"tourBookings/{bookingId}","operator":"match-path-pattern"}],"serviceAccountEmail":"127494847818-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"57ebc8b031f1fc21c151944b9fee41049d1925bd"},"environment":"GEN_2"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/127494847818/locations/us-central1/builds/5fbdae1d-d269-4d0a-97fb-5a61ac8a6511","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/5fbdae1d-d269-4d0a-97fb-5a61ac8a6511?project=127494847818"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"CREATE_FUNCTION","buildName":"projects/127494847818/locations/us-central1/builds/5fbdae1d-d269-4d0a-97fb-5a61ac8a6511"},"done":false}
[debug] [2025-05-01T21:33:54.913Z] [create-default-us-central1-sendTourCalendarInvite] Retrying task index 0
[debug] [2025-05-01T21:33:54.914Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:33:54.914Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:33:54.914Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/village2-7a95d/locations/us-central1/operations/operation-1746135203653-63419c88b262e-5a7b0d64-ec5ef57b [none]
[debug] [2025-05-01T21:33:55.642Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/village2-7a95d/locations/us-central1/operations/operation-1746135203653-63419c88b262e-5a7b0d64-ec5ef57b 200
[debug] [2025-05-01T21:33:55.642Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/village2-7a95d/locations/us-central1/operations/operation-1746135203653-63419c88b262e-5a7b0d64-ec5ef57b {"name":"projects/village2-7a95d/locations/us-central1/operations/operation-1746135203653-63419c88b262e-5a7b0d64-ec5ef57b","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-05-01T21:33:24.790419353Z","endTime":"2025-05-01T21:33:48.042759981Z","target":"projects/village2-7a95d/locations/us-central1/functions/sendTourCalendarInvite","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/village2-7a95d/locations/us-central1/functions/sendTourCalendarInvite","buildConfig":{"runtime":"nodejs22","entryPoint":"sendTourCalendarInvite","source":{"storageSource":{"bucket":"gcf-v2-sources-127494847818-us-central1","object":"sendTourCalendarInvite/function-source.zip","generation":"1746135204003585"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"serviceAccount":"projects/village2-7a95d/serviceAccounts/127494847818-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/village2-7a95d/locations/us-central1/services/sendtourcalendarinvite","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"village2-7a95d\",\"storageBucket\":\"village2-7a95d.firebasestorage.app\"}","GCLOUD_PROJECT":"village2-7a95d","EVENTARC_CLOUD_EVENT_SOURCE":"projects/village2-7a95d/locations/us-central1/services/sendTourCalendarInvite","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"sendTourCalendarInvite","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"127494847818-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/village2-7a95d/locations/nam5/triggers/sendtourcalendarinvite-738201","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"tourBookings/{bookingId}","operator":"match-path-pattern"}],"serviceAccountEmail":"127494847818-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"57ebc8b031f1fc21c151944b9fee41049d1925bd"},"environment":"GEN_2"},"stages":[{"name":"ARTIFACT_REGISTRY","message":"Deleting function artifacts in Artifact Registry","state":"COMPLETE"},{"name":"SERVICE","message":"Deleting Cloud Run service","state":"COMPLETE","resource":"projects/village2-7a95d/locations/us-central1/services/sendtourcalendarinvite"},{"name":"TRIGGER","message":"Deleting Eventarc trigger","state":"COMPLETE","resource":"projects/village2-7a95d/locations/nam5/triggers/sendtourcalendarinvite-738201"}],"operationType":"CREATE_FUNCTION"},"done":true,"error":{"code":3,"message":"Build failed with status: FAILURE. Could not build the function due to a missing permission on the build service account. If you didn't revoke that permission explicitly, this could be caused by a change in the organization policies. Please refer to the following documentation for more details and resolution: https://cloud.google.com/functions/docs/troubleshooting#build-service-account\n You can also view the logs at https://console.cloud.google.com/cloud-build/builds;region=us-central1/5fbdae1d-d269-4d0a-97fb-5a61ac8a6511?project=127494847818.\n"}}
[debug] [2025-05-01T21:33:55.643Z] Got source token undefined for region us-central1
[debug] [2025-05-01T21:33:55.644Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:33:55.645Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:33:55.645Z] >>> [apiv2][query] PATCH https://cloudfunctions.googleapis.com/v2/projects/village2-7a95d/locations/us-central1/functions/helloWorld updateMask=name%2CbuildConfig.runtime%2CbuildConfig.entryPoint%2CbuildConfig.source.storageSource.bucket%2CbuildConfig.source.storageSource.object%2CbuildConfig.environmentVariables%2CbuildConfig.sourceToken%2CserviceConfig.environmentVariables%2CserviceConfig.ingressSettings%2CserviceConfig.timeoutSeconds%2CserviceConfig.serviceAccountEmail%2CserviceConfig.availableMemory%2CserviceConfig.minInstanceCount%2CserviceConfig.maxInstanceCount%2CserviceConfig.maxInstanceRequestConcurrency%2CserviceConfig.availableCpu%2CserviceConfig.vpcConnector%2CserviceConfig.vpcConnectorEgressSettings%2Clabels%2CbuildConfig.buildEnvironmentVariables
[debug] [2025-05-01T21:33:55.645Z] >>> [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v2/projects/village2-7a95d/locations/us-central1/functions/helloWorld {"name":"projects/village2-7a95d/locations/us-central1/functions/helloWorld","buildConfig":{"runtime":"nodejs22","entryPoint":"helloWorld","source":{"storageSource":{"bucket":"gcf-v2-uploads-127494847818.us-central1.cloudfunctions.appspot.com","object":"6bb1870b-e1b4-4f61-868f-66744fc3c556.zip"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}},"serviceConfig":{"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"village2-7a95d\",\"storageBucket\":\"village2-7a95d.firebasestorage.app\"}","GCLOUD_PROJECT":"village2-7a95d","EVENTARC_CLOUD_EVENT_SOURCE":"projects/village2-7a95d/locations/us-central1/services/helloWorld","FUNCTION_TARGET":"helloWorld","LOG_EXECUTION_ID":"true"},"ingressSettings":null,"timeoutSeconds":null,"serviceAccountEmail":null,"availableMemory":"256Mi","minInstanceCount":null,"maxInstanceCount":null,"maxInstanceRequestConcurrency":80,"availableCpu":"1","vpcConnector":null,"vpcConnectorEgressSettings":null},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"57ebc8b031f1fc21c151944b9fee41049d1925bd"}}
[error] Build failed with status: FAILURE. Could not build the function due to a missing permission on the build service account. If you didn't revoke that permission explicitly, this could be caused by a change in the organization policies. Please refer to the following documentation for more details and resolution: https://cloud.google.com/functions/docs/troubleshooting#build-service-account
 You can also view the logs at https://console.cloud.google.com/cloud-build/builds;region=us-central1/5fbdae1d-d269-4d0a-97fb-5a61ac8a6511?project=127494847818.

[debug] [2025-05-01T21:33:57.063Z] <<< [apiv2][status] PATCH https://cloudfunctions.googleapis.com/v2/projects/village2-7a95d/locations/us-central1/functions/helloWorld 200
[debug] [2025-05-01T21:33:57.063Z] <<< [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v2/projects/village2-7a95d/locations/us-central1/functions/helloWorld {"name":"projects/village2-7a95d/locations/us-central1/operations/operation-1746135236108-63419ca7a5fc1-5c563edd-981819a6","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-05-01T21:33:56.774654009Z","target":"projects/village2-7a95d/locations/us-central1/functions/helloWorld","verb":"update","cancelRequested":false,"apiVersion":"v2"},"done":false}
[debug] [2025-05-01T21:33:57.064Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:33:57.064Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:33:57.065Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/village2-7a95d/locations/us-central1/operations/operation-1746135236108-63419ca7a5fc1-5c563edd-981819a6 [none]
[debug] [2025-05-01T21:33:57.761Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/village2-7a95d/locations/us-central1/operations/operation-1746135236108-63419ca7a5fc1-5c563edd-981819a6 200
[debug] [2025-05-01T21:33:57.761Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/village2-7a95d/locations/us-central1/operations/operation-1746135236108-63419ca7a5fc1-5c563edd-981819a6 {"name":"projects/village2-7a95d/locations/us-central1/operations/operation-1746135236108-63419ca7a5fc1-5c563edd-981819a6","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-05-01T21:33:56.774654009Z","target":"projects/village2-7a95d/locations/us-central1/functions/helloWorld","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/village2-7a95d/locations/us-central1/functions/helloWorld","buildConfig":{"runtime":"nodejs22","entryPoint":"helloWorld","source":{"storageSource":{"bucket":"gcf-v2-sources-127494847818-us-central1","object":"helloWorld/function-source.zip","generation":"1746135236729993"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/village2-7a95d/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-127494847818-us-central1","object":"helloWorld/function-source.zip","generation":"1746133899604084"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/village2-7a95d/serviceAccounts/127494847818-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/village2-7a95d/locations/us-central1/services/helloworld","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"village2-7a95d\",\"storageBucket\":\"village2-7a95d.firebasestorage.app\"}","GCLOUD_PROJECT":"village2-7a95d","EVENTARC_CLOUD_EVENT_SOURCE":"projects/village2-7a95d/locations/us-central1/services/helloWorld","FUNCTION_TARGET":"helloWorld","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"127494847818-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"UNKNOWN","labels":{"firebase-functions-hash":"57ebc8b031f1fc21c151944b9fee41049d1925bd"},"stateMessages":[{"severity":"ERROR","type":"CloudRunServiceNotFound","message":"Cloud Run service projects/village2-7a95d/locations/us-central1/services/helloworld for the function was not found. The function will not work correctly. Please redeploy."}],"environment":"GEN_2","url":"https://us-central1-village2-7a95d.cloudfunctions.net/helloWorld","satisfiesPzi":true},"stages":[{"name":"BUILD","state":"NOT_STARTED"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION"},"done":false}
[debug] [2025-05-01T21:33:58.262Z] [update-default-us-central1-helloWorld] Retrying task index 0
[debug] [2025-05-01T21:33:58.262Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:33:58.262Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:33:58.263Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/village2-7a95d/locations/us-central1/operations/operation-1746135236108-63419ca7a5fc1-5c563edd-981819a6 [none]
[debug] [2025-05-01T21:33:58.964Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/village2-7a95d/locations/us-central1/operations/operation-1746135236108-63419ca7a5fc1-5c563edd-981819a6 200
[debug] [2025-05-01T21:33:58.965Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/village2-7a95d/locations/us-central1/operations/operation-1746135236108-63419ca7a5fc1-5c563edd-981819a6 {"name":"projects/village2-7a95d/locations/us-central1/operations/operation-1746135236108-63419ca7a5fc1-5c563edd-981819a6","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-05-01T21:33:56.774654009Z","target":"projects/village2-7a95d/locations/us-central1/functions/helloWorld","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/village2-7a95d/locations/us-central1/functions/helloWorld","buildConfig":{"runtime":"nodejs22","entryPoint":"helloWorld","source":{"storageSource":{"bucket":"gcf-v2-sources-127494847818-us-central1","object":"helloWorld/function-source.zip","generation":"1746135236729993"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/village2-7a95d/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-127494847818-us-central1","object":"helloWorld/function-source.zip","generation":"1746133899604084"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/village2-7a95d/serviceAccounts/127494847818-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/village2-7a95d/locations/us-central1/services/helloworld","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"village2-7a95d\",\"storageBucket\":\"village2-7a95d.firebasestorage.app\"}","GCLOUD_PROJECT":"village2-7a95d","EVENTARC_CLOUD_EVENT_SOURCE":"projects/village2-7a95d/locations/us-central1/services/helloWorld","FUNCTION_TARGET":"helloWorld","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"127494847818-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"UNKNOWN","labels":{"firebase-functions-hash":"57ebc8b031f1fc21c151944b9fee41049d1925bd"},"stateMessages":[{"severity":"ERROR","type":"CloudRunServiceNotFound","message":"Cloud Run service projects/village2-7a95d/locations/us-central1/services/helloworld for the function was not found. The function will not work correctly. Please redeploy."}],"environment":"GEN_2","url":"https://us-central1-village2-7a95d.cloudfunctions.net/helloWorld","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/127494847818/locations/us-central1/builds/2fd79258-7362-4eed-8602-43ccef3bb79c","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/2fd79258-7362-4eed-8602-43ccef3bb79c?project=127494847818"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/127494847818/locations/us-central1/builds/2fd79258-7362-4eed-8602-43ccef3bb79c"},"done":false}
[debug] [2025-05-01T21:33:59.978Z] [update-default-us-central1-helloWorld] Retrying task index 0
[debug] [2025-05-01T21:33:59.979Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:33:59.979Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:33:59.979Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/village2-7a95d/locations/us-central1/operations/operation-1746135236108-63419ca7a5fc1-5c563edd-981819a6 [none]
[debug] [2025-05-01T21:34:00.858Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/village2-7a95d/locations/us-central1/operations/operation-1746135236108-63419ca7a5fc1-5c563edd-981819a6 200
[debug] [2025-05-01T21:34:00.858Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/village2-7a95d/locations/us-central1/operations/operation-1746135236108-63419ca7a5fc1-5c563edd-981819a6 {"name":"projects/village2-7a95d/locations/us-central1/operations/operation-1746135236108-63419ca7a5fc1-5c563edd-981819a6","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-05-01T21:33:56.774654009Z","target":"projects/village2-7a95d/locations/us-central1/functions/helloWorld","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/village2-7a95d/locations/us-central1/functions/helloWorld","buildConfig":{"runtime":"nodejs22","entryPoint":"helloWorld","source":{"storageSource":{"bucket":"gcf-v2-sources-127494847818-us-central1","object":"helloWorld/function-source.zip","generation":"1746135236729993"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/village2-7a95d/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-127494847818-us-central1","object":"helloWorld/function-source.zip","generation":"1746133899604084"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/village2-7a95d/serviceAccounts/127494847818-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/village2-7a95d/locations/us-central1/services/helloworld","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"village2-7a95d\",\"storageBucket\":\"village2-7a95d.firebasestorage.app\"}","GCLOUD_PROJECT":"village2-7a95d","EVENTARC_CLOUD_EVENT_SOURCE":"projects/village2-7a95d/locations/us-central1/services/helloWorld","FUNCTION_TARGET":"helloWorld","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"127494847818-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"UNKNOWN","labels":{"firebase-functions-hash":"57ebc8b031f1fc21c151944b9fee41049d1925bd"},"stateMessages":[{"severity":"ERROR","type":"CloudRunServiceNotFound","message":"Cloud Run service projects/village2-7a95d/locations/us-central1/services/helloworld for the function was not found. The function will not work correctly. Please redeploy."}],"environment":"GEN_2","url":"https://us-central1-village2-7a95d.cloudfunctions.net/helloWorld","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/127494847818/locations/us-central1/builds/2fd79258-7362-4eed-8602-43ccef3bb79c","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/2fd79258-7362-4eed-8602-43ccef3bb79c?project=127494847818"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/127494847818/locations/us-central1/builds/2fd79258-7362-4eed-8602-43ccef3bb79c"},"done":false}
[debug] [2025-05-01T21:34:02.864Z] [update-default-us-central1-helloWorld] Retrying task index 0
[debug] [2025-05-01T21:34:02.864Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:34:02.865Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:34:02.865Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/village2-7a95d/locations/us-central1/operations/operation-1746135236108-63419ca7a5fc1-5c563edd-981819a6 [none]
[debug] [2025-05-01T21:34:03.561Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/village2-7a95d/locations/us-central1/operations/operation-1746135236108-63419ca7a5fc1-5c563edd-981819a6 200
[debug] [2025-05-01T21:34:03.561Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/village2-7a95d/locations/us-central1/operations/operation-1746135236108-63419ca7a5fc1-5c563edd-981819a6 {"name":"projects/village2-7a95d/locations/us-central1/operations/operation-1746135236108-63419ca7a5fc1-5c563edd-981819a6","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-05-01T21:33:56.774654009Z","target":"projects/village2-7a95d/locations/us-central1/functions/helloWorld","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/village2-7a95d/locations/us-central1/functions/helloWorld","buildConfig":{"runtime":"nodejs22","entryPoint":"helloWorld","source":{"storageSource":{"bucket":"gcf-v2-sources-127494847818-us-central1","object":"helloWorld/function-source.zip","generation":"1746135236729993"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/village2-7a95d/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-127494847818-us-central1","object":"helloWorld/function-source.zip","generation":"1746133899604084"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/village2-7a95d/serviceAccounts/127494847818-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/village2-7a95d/locations/us-central1/services/helloworld","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"village2-7a95d\",\"storageBucket\":\"village2-7a95d.firebasestorage.app\"}","GCLOUD_PROJECT":"village2-7a95d","EVENTARC_CLOUD_EVENT_SOURCE":"projects/village2-7a95d/locations/us-central1/services/helloWorld","FUNCTION_TARGET":"helloWorld","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"127494847818-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"UNKNOWN","labels":{"firebase-functions-hash":"57ebc8b031f1fc21c151944b9fee41049d1925bd"},"stateMessages":[{"severity":"ERROR","type":"CloudRunServiceNotFound","message":"Cloud Run service projects/village2-7a95d/locations/us-central1/services/helloworld for the function was not found. The function will not work correctly. Please redeploy."}],"environment":"GEN_2","url":"https://us-central1-village2-7a95d.cloudfunctions.net/helloWorld","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/127494847818/locations/us-central1/builds/2fd79258-7362-4eed-8602-43ccef3bb79c","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/2fd79258-7362-4eed-8602-43ccef3bb79c?project=127494847818"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/127494847818/locations/us-central1/builds/2fd79258-7362-4eed-8602-43ccef3bb79c"},"done":false}
[debug] [2025-05-01T21:34:07.563Z] [update-default-us-central1-helloWorld] Retrying task index 0
[debug] [2025-05-01T21:34:07.564Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:34:07.564Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:34:07.564Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/village2-7a95d/locations/us-central1/operations/operation-1746135236108-63419ca7a5fc1-5c563edd-981819a6 [none]
[debug] [2025-05-01T21:34:08.273Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/village2-7a95d/locations/us-central1/operations/operation-1746135236108-63419ca7a5fc1-5c563edd-981819a6 200
[debug] [2025-05-01T21:34:08.274Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/village2-7a95d/locations/us-central1/operations/operation-1746135236108-63419ca7a5fc1-5c563edd-981819a6 {"name":"projects/village2-7a95d/locations/us-central1/operations/operation-1746135236108-63419ca7a5fc1-5c563edd-981819a6","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-05-01T21:33:56.774654009Z","target":"projects/village2-7a95d/locations/us-central1/functions/helloWorld","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/village2-7a95d/locations/us-central1/functions/helloWorld","buildConfig":{"runtime":"nodejs22","entryPoint":"helloWorld","source":{"storageSource":{"bucket":"gcf-v2-sources-127494847818-us-central1","object":"helloWorld/function-source.zip","generation":"1746135236729993"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/village2-7a95d/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-127494847818-us-central1","object":"helloWorld/function-source.zip","generation":"1746133899604084"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/village2-7a95d/serviceAccounts/127494847818-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/village2-7a95d/locations/us-central1/services/helloworld","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"village2-7a95d\",\"storageBucket\":\"village2-7a95d.firebasestorage.app\"}","GCLOUD_PROJECT":"village2-7a95d","EVENTARC_CLOUD_EVENT_SOURCE":"projects/village2-7a95d/locations/us-central1/services/helloWorld","FUNCTION_TARGET":"helloWorld","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"127494847818-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"UNKNOWN","labels":{"firebase-functions-hash":"57ebc8b031f1fc21c151944b9fee41049d1925bd"},"stateMessages":[{"severity":"ERROR","type":"CloudRunServiceNotFound","message":"Cloud Run service projects/village2-7a95d/locations/us-central1/services/helloworld for the function was not found. The function will not work correctly. Please redeploy."}],"environment":"GEN_2","url":"https://us-central1-village2-7a95d.cloudfunctions.net/helloWorld","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/127494847818/locations/us-central1/builds/2fd79258-7362-4eed-8602-43ccef3bb79c","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/2fd79258-7362-4eed-8602-43ccef3bb79c?project=127494847818"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/127494847818/locations/us-central1/builds/2fd79258-7362-4eed-8602-43ccef3bb79c"},"done":false}
[debug] [2025-05-01T21:34:16.283Z] [update-default-us-central1-helloWorld] Retrying task index 0
[debug] [2025-05-01T21:34:16.284Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:34:16.284Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:34:16.285Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/village2-7a95d/locations/us-central1/operations/operation-1746135236108-63419ca7a5fc1-5c563edd-981819a6 [none]
[debug] [2025-05-01T21:34:17.022Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/village2-7a95d/locations/us-central1/operations/operation-1746135236108-63419ca7a5fc1-5c563edd-981819a6 200
[debug] [2025-05-01T21:34:17.022Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/village2-7a95d/locations/us-central1/operations/operation-1746135236108-63419ca7a5fc1-5c563edd-981819a6 {"name":"projects/village2-7a95d/locations/us-central1/operations/operation-1746135236108-63419ca7a5fc1-5c563edd-981819a6","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-05-01T21:33:56.774654009Z","endTime":"2025-05-01T21:34:13.101652329Z","target":"projects/village2-7a95d/locations/us-central1/functions/helloWorld","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/village2-7a95d/locations/us-central1/functions/helloWorld","buildConfig":{"runtime":"nodejs22","entryPoint":"helloWorld","source":{"storageSource":{"bucket":"gcf-v2-sources-127494847818-us-central1","object":"helloWorld/function-source.zip","generation":"1746135236729993"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/village2-7a95d/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-127494847818-us-central1","object":"helloWorld/function-source.zip","generation":"1746133899604084"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/village2-7a95d/serviceAccounts/127494847818-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/village2-7a95d/locations/us-central1/services/helloworld","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"village2-7a95d\",\"storageBucket\":\"village2-7a95d.firebasestorage.app\"}","GCLOUD_PROJECT":"village2-7a95d","EVENTARC_CLOUD_EVENT_SOURCE":"projects/village2-7a95d/locations/us-central1/services/helloWorld","FUNCTION_TARGET":"helloWorld","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"127494847818-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"UNKNOWN","labels":{"firebase-functions-hash":"57ebc8b031f1fc21c151944b9fee41049d1925bd"},"stateMessages":[{"severity":"ERROR","type":"CloudRunServiceNotFound","message":"Cloud Run service projects/village2-7a95d/locations/us-central1/services/helloworld for the function was not found. The function will not work correctly. Please redeploy."}],"environment":"GEN_2","url":"https://us-central1-village2-7a95d.cloudfunctions.net/helloWorld","satisfiesPzi":true},"stages":[{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION"},"done":true,"error":{"code":3,"message":"Build failed with status: FAILURE. Could not build the function due to a missing permission on the build service account. If you didn't revoke that permission explicitly, this could be caused by a change in the organization policies. Please refer to the following documentation for more details and resolution: https://cloud.google.com/functions/docs/troubleshooting#build-service-account\n You can also view the logs at https://console.cloud.google.com/cloud-build/builds;region=us-central1/2fd79258-7362-4eed-8602-43ccef3bb79c?project=127494847818.\n"}}
[debug] [2025-05-01T21:34:17.023Z] Got source token undefined for region us-central1
[error] Build failed with status: FAILURE. Could not build the function due to a missing permission on the build service account. If you didn't revoke that permission explicitly, this could be caused by a change in the organization policies. Please refer to the following documentation for more details and resolution: https://cloud.google.com/functions/docs/troubleshooting#build-service-account
 You can also view the logs at https://console.cloud.google.com/cloud-build/builds;region=us-central1/2fd79258-7362-4eed-8602-43ccef3bb79c?project=127494847818.

[debug] [2025-05-01T21:34:17.043Z] Total Function Deployment time: 53873
[debug] [2025-05-01T21:34:17.043Z] 2 Functions Deployed
[debug] [2025-05-01T21:34:17.044Z] 2 Functions Errored
[debug] [2025-05-01T21:34:17.044Z] 0 Function Deployments Aborted
[debug] [2025-05-01T21:34:17.044Z] Average Function Deployment time: 43181
[info] 
[info] Functions deploy had errors with the following functions:
	helloWorld(us-central1)
	sendTourCalendarInvite(us-central1)
[debug] [2025-05-01T21:34:17.121Z] Not printing URL for HTTPS function. Typically this means it didn't match a filter or we failed deployment
[debug] [2025-05-01T21:34:17.122Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:34:17.123Z] Checked if tokens are valid: true, expires at: 1746136441537
[debug] [2025-05-01T21:34:17.123Z] >>> [apiv2][query] GET https://artifactregistry.googleapis.com/v1/projects/village2-7a95d/locations/us-central1/repositories/gcf-artifacts [none]
[debug] [2025-05-01T21:34:17.896Z] <<< [apiv2][status] GET https://artifactregistry.googleapis.com/v1/projects/village2-7a95d/locations/us-central1/repositories/gcf-artifacts 200
[debug] [2025-05-01T21:34:17.896Z] <<< [apiv2][body] GET https://artifactregistry.googleapis.com/v1/projects/village2-7a95d/locations/us-central1/repositories/gcf-artifacts {"name":"projects/village2-7a95d/locations/us-central1/repositories/gcf-artifacts","format":"DOCKER","description":"This repository is created and used by Cloud Functions for storing function docker images.","labels":{"goog-managed-by":"cloudfunctions"},"createTime":"2025-05-01T20:19:15.834781Z","updateTime":"2025-05-01T20:24:06.570551Z","mode":"STANDARD_REPOSITORY","cleanupPolicies":{"firebase-functions-cleanup":{"id":"firebase-functions-cleanup","action":"DELETE","condition":{"tagState":"ANY","olderThan":"86400s"}}},"vulnerabilityScanningConfig":{"lastEnableTime":"2025-05-01T20:19:06.404775303Z","enablementState":"SCANNING_DISABLED","enablementStateReason":"API containerscanning.googleapis.com is not enabled."},"satisfiesPzi":true,"registryUri":"us-central1-docker.pkg.dev/village2-7a95d/gcf-artifacts"}
[debug] [2025-05-01T21:34:17.897Z] Functions deploy failed.
[debug] [2025-05-01T21:34:17.897Z] {
  "endpoint": {
    "id": "sendTourCalendarInvite",
    "project": "village2-7a95d",
    "region": "us-central1",
    "entryPoint": "sendTourCalendarInvite",
    "platform": "gcfv2",
    "runtime": "nodejs22",
    "eventTrigger": {
      "eventType": "google.cloud.firestore.document.v1.created",
      "retry": false,
      "eventFilters": {
        "database": "(default)",
        "namespace": "(default)"
      },
      "eventFilterPathPatterns": {
        "document": "tourBookings/{bookingId}"
      },
      "region": "nam5"
    },
    "labels": {
      "deployment-tool": "cli-firebase"
    },
    "serviceAccount": null,
    "ingressSettings": null,
    "availableMemoryMb": null,
    "timeoutSeconds": null,
    "maxInstances": null,
    "minInstances": null,
    "concurrency": 80,
    "vpc": null,
    "environmentVariables": {
      "FIREBASE_CONFIG": "{\"projectId\":\"village2-7a95d\",\"storageBucket\":\"village2-7a95d.firebasestorage.app\"}",
      "GCLOUD_PROJECT": "village2-7a95d",
      "EVENTARC_CLOUD_EVENT_SOURCE": "projects/village2-7a95d/locations/us-central1/services/sendTourCalendarInvite"
    },
    "codebase": "default",
    "cpu": 1,
    "targetedByOnly": false,
    "hash": "57ebc8b031f1fc21c151944b9fee41049d1925bd"
  },
  "op": "create",
  "original": {
    "name": "FirebaseError",
    "children": [],
    "exit": 1,
    "message": "Build failed with status: FAILURE. Could not build the function due to a missing permission on the build service account. If you didn't revoke that permission explicitly, this could be caused by a change in the organization policies. Please refer to the following documentation for more details and resolution: https://cloud.google.com/functions/docs/troubleshooting#build-service-account\n You can also view the logs at https://console.cloud.google.com/cloud-build/builds;region=us-central1/5fbdae1d-d269-4d0a-97fb-5a61ac8a6511?project=127494847818.\n",
    "original": {
      "code": 3,
      "message": "Build failed with status: FAILURE. Could not build the function due to a missing permission on the build service account. If you didn't revoke that permission explicitly, this could be caused by a change in the organization policies. Please refer to the following documentation for more details and resolution: https://cloud.google.com/functions/docs/troubleshooting#build-service-account\n You can also view the logs at https://console.cloud.google.com/cloud-build/builds;region=us-central1/5fbdae1d-d269-4d0a-97fb-5a61ac8a6511?project=127494847818.\n"
    },
    "status": 3,
    "code": 3
  }
}
[debug] [2025-05-01T21:34:17.897Z] {
  "endpoint": {
    "id": "helloWorld",
    "project": "village2-7a95d",
    "region": "us-central1",
    "entryPoint": "helloWorld",
    "platform": "gcfv2",
    "runtime": "nodejs22",
    "httpsTrigger": {},
    "labels": {
      "deployment-tool": "cli-firebase"
    },
    "serviceAccount": null,
    "ingressSettings": null,
    "availableMemoryMb": null,
    "timeoutSeconds": null,
    "maxInstances": null,
    "minInstances": null,
    "concurrency": 80,
    "vpc": null,
    "environmentVariables": {
      "FIREBASE_CONFIG": "{\"projectId\":\"village2-7a95d\",\"storageBucket\":\"village2-7a95d.firebasestorage.app\"}",
      "GCLOUD_PROJECT": "village2-7a95d",
      "EVENTARC_CLOUD_EVENT_SOURCE": "projects/village2-7a95d/locations/us-central1/services/helloWorld"
    },
    "codebase": "default",
    "securityLevel": "SECURE_ALWAYS",
    "cpu": 1,
    "targetedByOnly": false,
    "hash": "57ebc8b031f1fc21c151944b9fee41049d1925bd"
  },
  "op": "update",
  "original": {
    "name": "FirebaseError",
    "children": [],
    "exit": 1,
    "message": "Build failed with status: FAILURE. Could not build the function due to a missing permission on the build service account. If you didn't revoke that permission explicitly, this could be caused by a change in the organization policies. Please refer to the following documentation for more details and resolution: https://cloud.google.com/functions/docs/troubleshooting#build-service-account\n You can also view the logs at https://console.cloud.google.com/cloud-build/builds;region=us-central1/2fd79258-7362-4eed-8602-43ccef3bb79c?project=127494847818.\n",
    "original": {
      "code": 3,
      "message": "Build failed with status: FAILURE. Could not build the function due to a missing permission on the build service account. If you didn't revoke that permission explicitly, this could be caused by a change in the organization policies. Please refer to the following documentation for more details and resolution: https://cloud.google.com/functions/docs/troubleshooting#build-service-account\n You can also view the logs at https://console.cloud.google.com/cloud-build/builds;region=us-central1/2fd79258-7362-4eed-8602-43ccef3bb79c?project=127494847818.\n"
    },
    "status": 3,
    "code": 3
  }
}
[error] Error: There was an error deploying functions:
[error] - Error Failed to create function sendTourCalendarInvite in region us-central1
[error] - Error Failed to update function helloWorld in region us-central1
